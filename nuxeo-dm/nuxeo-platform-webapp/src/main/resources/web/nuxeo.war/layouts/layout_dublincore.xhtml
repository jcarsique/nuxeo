<f:subview
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:nxw="http://nuxeo.org/nxforms/runtime/widget"
  xmlns:nxwt="http://nuxeo.org/nxforms/runtime/widgettype"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  id="#{layout.id}">

  <c:set var="isEditMode" value="#{nxl:isBoundToEditMode(layout.mode)}" />
  <nxu:set var="layoutWidgetsDisplay"
    value="#{layout.properties.widgetsDisplay}"
    resolveTwice="true">

    <table class="#{nxu:joinRender('dataInput', layoutProperty_styleClass)}">
      <tbody>
        <c:if test="#{layoutMode != 'view_summary' or empty layoutValue.dc.nature}">
          <tr>
            <td class="labelColumn">
              <ui:include src="/widgets/incl/label_template.xhtml">
                <ui:param name="label" value="#{messages['label.dublincore.nature']}" />
              </ui:include>
            </td>
            <td class="fieldColumn">
              <nxw:nature value="#{value}"
                mode="#{nxl:getWidgetModeFromLayoutMode(layoutMode)}" />
            </td>
          </tr>
        </c:if>

        <c:if test="#{layoutMode != 'view_summary' or empty layoutValue.dc.subjects}">
          <tr>
            <td class="labelColumn">
              <ui:include src="/widgets/incl/label_template.xhtml">
                <ui:param name="label" value="#{messages['label.dublincore.subject']}" />
                <ui:param name="helpLabel" value="#{isEditMode ? messages['label.dublincore.subjects.info'] : ''}" />
              </ui:include>
            </td>
            <td class="fieldColumn">
              <nxwt:suggestManyDirectory value="#{value}"
                mode="#{nxl:getWidgetModeFromLayoutMode(layoutMode)}"
                field="dc:subjects"
                width="100%"
                dbl10n="true"
                minChars="0"
                hideHelpLabel="true"
                directoryName="l10nsubjects" />
            </td>
          </tr>
        </c:if>

        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['rights']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['source']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['coverage']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['created']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['modified']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['format']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['language']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['expired']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['author']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['contributors']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
        <tr>
          <nxu:set var="widget" value="#{layout.widgetMap['lastContributor']}">
            <td class="labelColumn">
              <ui:include src="/widgets/incl/widget_label_template.xhtml" />
            </td>
            <td class="fieldColumn">
              <nxl:widget widget="#{widget}" value="#{value}" />
            </td>
          </nxu:set>
        </tr>
      </tbody>
    </table>

  </nxu:set>

</f:subview>