<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxr="http://nuxeo.org/nxweb/resources"
  class="nx-page nx-branding">

  <f:view contentType="text/html" />
  <h:head id="pageHead">

    <title>
      <ui:insert name="page title" />
    </title>

    <ui:insert name="bookmark" />

    <nxr:insert target="csshead" />

    <ui:remove>
      Compat templating zones
    </ui:remove>
    <ui:insert name="stylesheets" />
    <ui:insert name="header_scripts" />

    <ui:insert name="page head resources">
      <ui:decorate template="/incl/page_head.xhtml">
        <ui:param name="pageName" value="#{pageName}" />
        <ui:param name="pageFlavor" value="#{pageFlavor}" />
        <ui:param name="pageJsTarget" value="#{configurationService.isBooleanPropertyTrue('nuxeo.jsf.deferJavaScriptLoading')?'jsbody':null}" />
        <ui:param name="pageCssTarget" value="csshead" />
      </ui:decorate>
    </ui:insert>
    <ui:insert name="page head" />

  </h:head>
  <h:body>

    <nxu:set var="pageCssTarget" value="head">
    <nxu:set var="pageJsTarget" value="#{configurationService.isBooleanPropertyTrue('nuxeo.jsf.deferJavaScriptLoading')?'jsbody':''}">

      <div class="includes displayNone">
        <ui:insert name="basic body includes" />
      </div>

      <ui:insert name="basic body" />

    </nxu:set>
    </nxu:set>

    <nxr:insert target="jsbody" />
  </h:body>

</html>